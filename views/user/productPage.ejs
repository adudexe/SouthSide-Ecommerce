<%- include('../partials/user/header') %>
<style></style>
    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="index.html"><img src="/user/assets/imgs/theme/logo.svg" alt="logo"></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for items…">
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <div class="main-categori-wrap mobile-header-border">
                        <a class="categori-button-active-2" href="#">
                            <span class="fi-rs-apps"></span> Browse Categories
                        </a>
                        <div class="categori-dropdown-wrap categori-dropdown-active-small">
                            <ul>
                                <li><a href="shop-grid-right.html"><i class="evara-font-dress"></i>Women's Clothing</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-tshirt"></i>Men's Clothing</a></li>
                                <li> <a href="shop-grid-right.html"><i class="evara-font-smartphone"></i> Cellphones</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-desktop"></i>Computer & Office</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-cpu"></i>Consumer Electronics</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-home"></i>Home & Garden</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-high-heels"></i>Shoes</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-teddy-bear"></i>Mother & Kids</a></li>
                                <li><a href="shop-grid-right.html"><i class="evara-font-kite"></i>Outdoor fun</a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- mobile menu start -->
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="index.html">Home</a>
                                <ul class="dropdown">
                                    <li><a href="index.html">Home 1</a></li>
                                    <li><a href="index-2.html">Home 2</a></li>
                                    <li><a href="index-3.html">Home 3</a></li>
                                    <li><a href="index-4.html">Home 4</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="shop-grid-right.html">shop</a>
                                <ul class="dropdown">
                                    <li><a href="shop-grid-right.html">Shop Grid – Right Sidebar</a></li>
                                    <li><a href="shop-grid-left.html">Shop Grid – Left Sidebar</a></li>
                                    <li><a href="shop-list-right.html">Shop List – Right Sidebar</a></li>
                                    <li><a href="shop-list-left.html">Shop List – Left Sidebar</a></li>
                                    <li><a href="shop-fullwidth.html">Shop - Wide</a></li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Single Product</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Product – Right Sidebar</a></li>
                                            <li><a href="shop-product-left.html">Product – Left Sidebar</a></li>
                                            <li><a href="shop-product-full.html">Product – No sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="shop-filter.html">Shop – Filter</a></li>
                                    <li><a href="shop-wishlist.html">Shop – Wishlist</a></li>
                                    <li><a href="shop-cart.html">Shop – Cart</a></li>
                                    <li><a href="shop-checkout.html">Shop – Checkout</a></li>
                                    <li><a href="shop-compare.html">Shop – Compare</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Mega menu</a>
                                <ul class="dropdown">
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Women's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Dresses</a></li>
                                            <li><a href="shop-product-right.html">Blouses & Shirts</a></li>
                                            <li><a href="shop-product-right.html">Hoodies & Sweatshirts</a></li>
                                            <li><a href="shop-product-right.html">Women's Sets</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Men's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Jackets</a></li>
                                            <li><a href="shop-product-right.html">Casual Faux Leather</a></li>
                                            <li><a href="shop-product-right.html">Genuine Leather</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Technology</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Gaming Laptops</a></li>
                                            <li><a href="shop-product-right.html">Ultraslim Laptops</a></li>
                                            <li><a href="shop-product-right.html">Tablets</a></li>
                                            <li><a href="shop-product-right.html">Laptop Accessories</a></li>
                                            <li><a href="shop-product-right.html">Tablet Accessories</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="blog-category-fullwidth.html">Blog</a>
                                <ul class="dropdown">
                                    <li><a href="blog-category-grid.html">Blog Category Grid</a></li>
                                    <li><a href="blog-category-list.html">Blog Category List</a></li>
                                    <li><a href="blog-category-big.html">Blog Category Big</a></li>
                                    <li><a href="blog-category-fullwidth.html">Blog Category Wide</a></li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Single Product Layout</a>
                                        <ul class="dropdown">
                                            <li><a href="blog-post-left.html">Left Sidebar</a></li>
                                            <li><a href="blog-post-right.html">Right Sidebar</a></li>
                                            <li><a href="blog-post-fullwidth.html">No Sidebar</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Pages</a>
                                <ul class="dropdown">
                                    <li><a href="page-about.html">About Us</a></li>
                                    <li><a href="page-contact.html">Contact</a></li>
                                    <li><a href="page-account.html">My Account</a></li>
                                    <li><a href="page-login-register.html">login/register</a></li>
                                    <li><a href="page-purchase-guide.html">Purchase Guide</a></li>
                                    <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                                    <li><a href="page-terms.html">Terms of Service</a></li>
                                    <li><a href="page-404.html">404 Page</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Language</a>
                                <ul class="dropdown">
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">French</a></li>
                                    <li><a href="#">German</a></li>
                                    <li><a href="#">Spanish</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- mobile menu end -->
                </div>
                <div class="mobile-header-info-wrap mobile-header-border">
                    <div class="single-mobile-header-info mt-30">
                        <a  href="page-contact.html"> Our location </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="page-login-register.html">Log In / Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#">(+01) - 2345 - 6789 </a>
                    </div>
                </div>
                <div class="mobile-social-icon">
                    <h5 class="mb-15 text-grey-4">Follow Us</h5>
                    <a href="#"><img src="/assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                    <a href="#"><img src="/assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                    <a href="#"><img src="/assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                    <a href="#"><img src="/assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                    <a href="#"><img src="/assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                </div>
            </div>
        </div>
    </div>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span></span> Fashion
                    <span></span> Abstract Print Patchwork Dress
                </div>
            </div>
        </div>
        <section class="mt-50 mb-50">
            <div class="container" id="product-container" data-details="<%= JSON.stringify(productDetails) %>">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product-detail accordion-detail">
                            <div class="row mb-50">
                                <div class="col-md-6 col-sm-12 col-xs-12">
                                    <div class="detail-gallery">
                                        <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                        <!-- MAIN SLIDES -->
                                        <div class="product-image-slider">
                                            <% productDetails.productImages.forEach(element => { %>
                                                <figure class="border-radius-10">
                                                    <img src="/<%=element%>" alt="product image">
                                                </figure>
                                            <% }) %>  
                                        </div>
                                        <!-- THUMBNAILS -->
                                        <div class="slider-nav-thumbnails pl-15 pr-15">
                                            <% productDetails.productImages.forEach(element => { %>
                                            <div><img src="/<%=element%>" alt="product image"></div>
                                            <% }) %>    
                                        </div>
                                    </div>
                                    <!-- End Gallery -->
                                </div>
                                <div class="col-md-6 col-sm-12 col-xs-12" id="productClass">
                                    <div class="detail-info">
                                        <h2 class="title-detail"><%= productDetails.productName %></h2>
                                        <div class="product-detail-rating">
                                            <div class="pro-details-brand">
                                                <!-- <span> Brands: <a href="shop-grid-right.html">Bootstrap</a></span> -->
                                            </div>
                                        </div>
                                        <div class="clearfix product-price-cover" id="productPrice">
                                            <div class="product-price primary-color float-left">
                                                <ins><span class="text-brand">₹<%= productDetails.variants[0].salePrice %></span></ins>
                                                <ins><span class="old-price font-md ml-15">₹<%= productDetails.variants[0].price %></span></ins>
                                                <span class="save-price  font-md color3 ml-15"><%= productDetails.productOffer%> % Off</span>
                                            </div>
                                        </div>
                                        <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                        <div class="short-desc mb-30">
                                            <p><%= productDetails.description %></p>
                                        </div>
                                      
                                        <!-- <p><%= productDetails._id %></p> -->
                                        <% productDetails.variants.forEach((element, index) => { %>
                                            <div class="variants-card" style="display: inline-block; margin-top: 4px; width: 120px; padding: 10px; text-align: center;">
                                                <!-- Radio button for variant selection -->
                                                <label class="variant-option" style="display: flex; flex-direction: column; align-items: center;">
                                                    <input 
                                                        type="radio" 
                                                        name="variant" 
                                                        value="<%= index %>"  
                                                        class="variant-radio" 
                                                        id="variant-<%= index %>" 
                                                        style="transform: scale(0.6); margin-bottom: 5px;" 
                                                        data-variant="<%= JSON.stringify(element) %>"
                                                        data-productId="<%= JSON.stringify(productDetails._id) %>" 
                                                    />
                                                    <div class="variant-info" style="font-size: 12px;" id="variant-info">
                                                        <span><strong>Size:</strong> <%= element.size %></span>
                                                        
                                                        <br>
                                                        
                                                        <span><strong>Color:</strong> <%= element.color %></span>
                                                    </div>
                                                </label>
                                            </div>
                                        <% }) %>
                                        
                                        
                                       
                                        <div class="bt-1 border-color-1 mt-30 mb-30" id="cart"></div>
                                        <div class="detail-extralink">
                                            <div class="detail-qty border radius" id="quantity-counter">
                                                <select id="qty-val" class="qty-dropdown">
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                </select>
                                            </div>
                                            
                                            <div class="product-extra-link2">
                                                <button type="submit" class="button button-add-to-cart" id="add-to-cart">Add to cart</button>
                                                <a aria-label="Add To Wishlist" class="action-btn hover-up " ><i class="fi-rs-heart add-to-wishlist"></i></a>
                                                <!-- <a aria-label="Compare" class="action-btn hover-up" href="shop-compare.html"><i class="fi-rs-shuffle"></i></a> -->
                                            </div>
                                        </div>
                                        <ul class="product-meta font-xs color-grey mt-50" id="details">
                                            <!-- <li class="mb-5">SKU: <a href="#">FWM15VKT</a></li>
                                            <li class="mb-5">Tags: <a href="#" rel="tag">Cloth</a>, <a href="#" rel="tag">Women</a>, <a href="#" rel="tag">Dress</a> </li> -->
                                        </ul>
                                    </div>
                                    <!-- Detail Info -->
                            </div>
                            </div>  
    </main>
    <footer class="main">
        <section class="newsletter p-30 text-white wow fadeIn animated">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-7 mb-md-3 mb-lg-0">
                        <div class="row align-items-center">
                            <div class="col flex-horizontal-center">
                                <img class="icon-email" src="/assets/imgs/theme/icons/icon-email.svg" alt="">
                                <h4 class="font-size-20 mb-0 ml-3">Sign up to Newsletter</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <!-- Subscribe Form -->
                        <form class="form-subcriber d-flex wow fadeIn animated">
                            <input type="email" class="form-control bg-white font-small" placeholder="Enter your email">
                            <button class="btn bg-dark text-white" type="submit">Subscribe</button>
                        </form>
                        <!-- End Subscribe Form -->
                    </div>
                </div>
            </div>
        </section>
        <section class="section-padding footer-mid">
            <div class="container pt-15 pb-20">
                <div class="row">
                    <div class="col-lg-4 col-md-6">
                        <div class="widget-about font-md mb-md-5 mb-lg-0">
                            <div class="logo logo-width-1 wow fadeIn animated">
                                <a href="index.html"><img src="/assets/imgs/theme/logo.svg" alt="logo"></a>
                            </div>
                            <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
                            <p class="wow fadeIn animated">
                                <strong>Address: </strong>562 Wellington Road, Street 32, San Francisco
                            </p>
                            <p class="wow fadeIn animated">
                                <strong>Phone: </strong>+01 2222 365 /(+91) 01 2345 6789
                            </p>
                            <p class="wow fadeIn animated">
                                <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                            </p>
                            <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">Follow Us</h5>
                            <div class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0">
                                <a href="#"><img src="/assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                                <a href="#"><img src="/assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                                <a href="#"><img src="/assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                                <a href="#"><img src="/assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                                <a href="#"><img src="/assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3">
                        <h5 class="widget-title wow fadeIn animated">About</h5>
                        <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Delivery Information</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms &amp; Conditions</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Support Center</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2  col-md-3">
                        <h5 class="widget-title wow fadeIn animated">My Account</h5>
                        <ul class="footer-list wow fadeIn animated">
                            <li><a href="#">Sign In</a></li>
                            <li><a href="#">View Cart</a></li>
                            <li><a href="#">My Wishlist</a></li>
                            <li><a href="#">Track My Order</a></li>
                            <li><a href="#">Help</a></li>
                            <li><a href="#">Order</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-4">
                        <h5 class="widget-title wow fadeIn animated">Install App</h5>
                        <div class="row">
                            <div class="col-md-8 col-lg-12">
                                <p class="wow fadeIn animated">From App Store or Google Play</p>
                                <div class="download-app wow fadeIn animated">
                                    <a href="#" class="hover-up mb-sm-4 mb-lg-0"><img class="active" src="assets/imgs/theme/app-store.jpg" alt=""></a>
                                    <a href="#" class="hover-up"><img src="/assets/imgs/theme/google-play.jpg" alt=""></a>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-12 mt-md-3 mt-lg-0">
                                <p class="mb-20 wow fadeIn animated">Secured Payment Gateways</p>
                                <img class="wow fadeIn animated" src="/assets/imgs/theme/payment-method.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="container pb-20 wow fadeIn animated">
            <div class="row">
                <div class="col-12 mb-20">
                    <div class="footer-bottom"></div>
                </div>
                <div class="col-lg-6">
                    <p class="float-md-left font-sm text-muted mb-0">&copy; 2022, <strong class="text-brand">Evara</strong> - HTML Ecommerce Template </p>
                </div>
                <div class="col-lg-6">
                    <p class="text-lg-end text-start font-sm text-muted mb-0">
                        Designed by <a href="http://alithemes.com" target="_blank">Alithemes.com</a>. All rights reserved
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-5">Now Loading</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        const varinatInfo = document.getElementById("details");
        const prodductPrice = document.getElementById("productPrice");
        const addToCartButton = document.getElementById('add-to-cart');
        const productDetails = JSON.parse(document.getElementById("product-container").getAttribute("data-details"));
        let variantValue = null;
        let variantDetails = {}
        let isValid = false;

        document.querySelectorAll('input[type="radio"]').forEach((radio)=>{
            radio.addEventListener("click",(e)=>{
                let variant = e.target.getAttribute('data-variant');
                // console.log(variant);
                let variantObject = JSON.parse(variant);
                // console.log(variantObject)
                variantValue = e.target.value;
                // console.log(variantValue);
                variantDetails = variantObject;
                

                let quantityLi = varinatInfo.querySelector("#quantity");
                // console.log(quantityLi);
                if(quantityLi)
                {
                    varinatInfo.removeChild(quantityLi);
                }
                    
                let li = document.createElement('div')
                li.id="quantity"

                if(variantObject.quantity<=0)
                {
                    li.innerHTML=`<p>Availability:<span class="in-stock text-success ml-5">Out Of Stock</span></p>`
                    varinatInfo.appendChild(li);   
                }
                else
                {
                    li.innerHTML = `<p>Availability:<span class="in-stock text-success ml-5">${variantObject.quantity}\tItems In Stock</span></p>`
                    varinatInfo.appendChild(li);
                }

                prodductPrice.innerHTML = "";

                //Product Price Change..
                const div = document.createElement("div");
                div.classList.add("product-price");
                div.classList.add("primary-color");
                div.classList.add("float-left");

                div.innerHTML = `
                        <ins><span class="text-brand">₹${variantObject.salePrice }</span></ins>
                        <ins><span class="old-price font-md ml-15">₹${variantObject.price}</span></ins>
                        <span class="save-price  font-md color3 ml-15">${productDetails.productOffer} % Off</span>                        
                `
                // console.log(div);
                prodductPrice.appendChild(div);
                
            })
        })

        addToCartButton.addEventListener("click",async (e)=>{
            e.preventDefault();
            const Toast = Swal.mixin({
            toast: true,
            position: "top-end",
            showConfirmButton: false,
            timer: 3000,
            timerProgressBar: true,
            didOpen: (toast) => {
                toast.onmouseenter = Swal.stopTimer;
                toast.onmouseleave = Swal.resumeTimer;
            }
            });

            const productDetails = JSON.parse(document.getElementById("product-container").getAttribute("data-details"));
            const quantityValue = document.getElementById('qty-val');
            // console.log('variantIndex',variantValue);
            // console.log("variantDetails",variantDetails);
            // console.log("productDetails",productDetails._id);
            // const productId = (productDetails._id).toString();
            const isSelected = document.querySelector('input[type="radio"]:checked');
            // console.log(isSelected);

            const data = {};
            
            data.productId = productDetails._id;
            data.variantId = variantDetails._id;
            data.quantity = quantityValue.value;
            
            console.log(data);

            // const quantityCard = document.getElementById('detail-qty');
            
            // console.log(quantityValue.value);

            if(!isSelected)
            {
                Swal.fire({
                    icon: 'warning',
                    title: 'Please select a variant!',
                    text: 'You need to select a product variant before proceeding.',
                    confirmButtonText: 'OK'
                });
            }
            else
            {
                const response = await fetch(`/user/cart/add`,{
                method:"POST",
                headers:{
                    "Content-Type":"application/json",
                },
                body:JSON.stringify(data),
                })
                console.log(response);
                
                const details = await response.json();

                console.log(details);

                if(details.success)
                {
                    Toast.fire({
                    icon: "success",
                    title: details.message || "Success"
                    });
                }
                else
                {
                    Toast.fire({
                    icon: "error",
                    title:  details.message || "Sever Side Error"
                    });
                }
            }
        })
    
    
    
    </script>

    <script>
        
        //Add to wishlist Login
        // Add product to wishlist 
        let variantId = null;
        let productId = null;
            document.querySelectorAll('input[type="radio"]').forEach((radio)=>{
            radio.addEventListener("click",(e)=>{
                console.log(e.target);
                variantId = JSON.parse(e.target.getAttribute('data-variant'))._id;
                productId = JSON.parse(e.target.getAttribute('data-productId'));
            })})


            // Add product to wishlist 
        document.querySelector(".add-to-wishlist").addEventListener("click", async (e) => {
                e.preventDefault();

                // let productId = button.getAttribute("data-id").trim();
                // let variantId = button.getAttribute("data-variantId").trim();
                console.log("productId",productId);
                console.log("variantId",variantId);
                try {
                    // Step 1: Show Confirmation Alert (Optional)
                    const confirmation = await Swal.fire({
                        title: "Add to Wishlist?",
                        text: "Do you want to save this product in your wishlist?",
                        icon: "question",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Yes, add it!"
                    });

                    if (!confirmation.isConfirmed) return; // If user cancels, exit function

                    // Step 2: Send Add-to-Wishlist Request
                    const response = await fetch(`/user/wishlist/add/${productId}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ variantId }),
                    });

                    const data = await response.json();
                    console.log(data);

                    if (response.ok) {
                        // Step 3: Show Success Message
                        Swal.fire({
                            title: "Added!",
                            text: "Product has been added to your wishlist.",
                            icon: "success",
                            timer: 2000,
                            showConfirmButton: false
                        });
                    } else {
                        // Step 4: Show Error Message if Server Fails
                        Swal.fire({
                            title: "Error!",
                            text: data.message || "Failed to add product to wishlist.",
                            icon: "error",
                            confirmButtonColor: "#d33"
                        });
                    }

                } catch (err) {
                    console.log("Error in adding data to wishlist", err);

                    // Step 5: Show Network Error Alert
                    Swal.fire({
                        title: "Oops!",
                        text: "Something went wrong. Please try again.",
                        icon: "error",
                        confirmButtonColor: "#d33"
                    });
                }
            });
            
            // button.addEventListener("click", async (e) => {
            //     e.preventDefault();

            //     let productId = button.getAttribute("data-id").trim();
            //     let variantId = button.getAttribute("data-variantId").trim();

            //     try {
            //         // Step 1: Show Confirmation Alert (Optional)
            //         const confirmation = await Swal.fire({
            //             title: "Add to Wishlist?",
            //             text: "Do you want to save this product in your wishlist?",
            //             icon: "question",
            //             showCancelButton: true,
            //             confirmButtonColor: "#3085d6",
            //             cancelButtonColor: "#d33",
            //             confirmButtonText: "Yes, add it!"
            //         });

            //         if (!confirmation.isConfirmed) return; // If user cancels, exit function

            //         // Step 2: Send Add-to-Wishlist Request
            //         const response = await fetch(`/user/wishlist/add/${productId}`, {
            //             method: "POST",
            //             headers: { "Content-Type": "application/json" },
            //             body: JSON.stringify({ variantId }),
            //         });

            //         const data = await response.json();
            //         console.log(data);

            //         if (response.ok) {
            //             // Step 3: Show Success Message
            //             Swal.fire({
            //                 title: "Added!",
            //                 text: "Product has been added to your wishlist.",
            //                 icon: "success",
            //                 timer: 2000,
            //                 showConfirmButton: false
            //             });
            //         } else {
            //             // Step 4: Show Error Message if Server Fails
            //             Swal.fire({
            //                 title: "Error!",
            //                 text: data.message || "Failed to add product to wishlist.",
            //                 icon: "error",
            //                 confirmButtonColor: "#d33"
            //             });
            //         }

            //     } catch (err) {
            //         console.log("Error in adding data to wishlist", err);

            //         // Step 5: Show Network Error Alert
            //         Swal.fire({
            //             title: "Oops!",
            //             text: "Something went wrong. Please try again.",
            //             icon: "error",
            //             confirmButtonColor: "#d33"
            //         });
            //     }
            // });



    </script>
    
    <!-- Vendor JS-->
    <script src="/user/assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="/user/assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/user/assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="/user/assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/user/assets/js/plugins/slick.js"></script>
    <script src="/user/assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/user/assets/js/plugins/wow.js"></script>
    <script src="/user/assets/js/plugins/jquery-ui.js"></script>
    <script src="/user/assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="/user/assets/js/plugins/magnific-popup.js"></script>
    <script src="/user/assets/js/plugins/select2.min.js"></script>
    <script src="/user/assets/js/plugins/waypoints.js"></script>
    <script src="/user/assets/js/plugins/counterup.js"></script>
    <script src="/user/assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="/user/assets/js/plugins/images-loaded.js"></script>
    <script src="/user/assets/js/plugins/isotope.js"></script>
    <script src="/user/assets/js/plugins/scrollup.js"></script>
    <script src="/user/assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="/user/assets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="/user/assets/js/plugins/jquery.elevatezoom.js"></script>
    <!-- Template  JS -->
    <script src="/user/assets/js/main.js?v=3.4"></script>
    <script src="/user/assets/js/shop.js?v=3.4"></script>
</body>

</html>